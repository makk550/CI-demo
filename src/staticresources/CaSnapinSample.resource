var subscriptionId,accountId,entitlement_type,accessToken,emailId;function getAccessToken(e){jQuery.ajax({url:"https://ca--fsb1.cs79.my.salesforce.com/services/oauth2/token?grant_type=password&client_id=3MVG98im9TK34CUU_AvwaugYPyJosDWzHQeN3ryoi52QVgkPR2KCQr5HMS4AeSpOka8cZuBzEVvSnMFKxnWQe&client_secret=3749916802070334057&username=servicecloud.casecreation@ca.com.fsb1&password=Servicecloud1",type:"POST",success:function(e){console.log("called in JQUERY"+e)},async:!1})}function callCommonStackservice(){var e="https://cs79.salesforce.com/services/apexrest/getuserservice?emailid="+emailId;jQuery.ajax({url:e,type:"GET",headers:{Authorization:"Bearer 00D1h0000008jLh!AQoAQAVUSidshhvJWn06cn2PUiHFL8UxFkEQbek_icyb5iubsg79FLuXppPoFL1v.CQu3LXXhSuQfmXmVp7irgmET59V0px8","Content-Type":"application/json"},success:function(e){console.log("called in JQUERY"+e)},async:!1})}function fillTranscriptFields(e,t,a,n){console.log("subscriptionId;--"+t+"accountId------"+e+"------type----"+a),embedded_svc.settings.extraPrechatFormDetails=[{label:"What can we help you with today?",transcriptFields:["Description_of_Issue__c"],displayToAgent:!1},{label:"First Name",transcriptFields:["First_Name__c"],displayToAgent:!0},{label:"Last Name",transcriptFields:["Last_Name__c"],displayToAgent:!0},{label:"Email",value:n,transcriptFields:["Email__c"],displayToAgent:!0},{value:e,transcriptFields:["Account"],displayToAgent:!1},{value:t,transcriptFields:["Subscription_ID__c"],displayToAgent:!1},{value:a,transcriptFields:["Subscription_Type__c"],displayToAgent:!1},{value:"ACs CA Product",transcriptFields:["Product_Code__c"],displayToAgent:!1}]}var CaSalesforceSnapIn=function(){var k,Q,q,B={createSnapIn:function(i,n,o,r,L,e,s){if(Q)throw new Error("not ready to support creation of multiple buttons in a session");Q=i,k=n,callCommonStackservice(emailId=e);var _,t=function(e){embedded_svc.settings.prepopulatedPrechatFields={FirstName:"John",LastName:"Doe"};var t={displayHelpButton:s,language:"",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat (Offline)",initialInteractionState:"WAITING",avatarImgURL:"chat-ca-avatar.svg",prechatBackgroundImgURL:"",waitingStateBackgroundImgURL:"",smallCompanyLogoImgURL:"",enabledFeatures:["LiveAgent"],entryFeature:"LiveAgent",targetElement:i};if(r)for(var a in r)t[a]=r[a];var n=embedded_svc.settings||{};for(a in t)n[a]=t[a];(embedded_svc.settings=n).language="en",console.log("language is"+embedded_svc.settings.language),o[2]=e,embedded_svc.init.apply(embedded_svc,o)};if(window.embedded_svc)t("https://service.force.com");else{var a=document.createElement("script");a.setAttribute("src","https://ca--FSB1.cs79.my.salesforce.com/embeddedservice/4.1/esw.min.js"),a.onload=function(){t(null)},document.body.appendChild(a)}var w=document.createDocumentFragment();new MutationObserver(c).observe(Q,{attributes:!0,childList:!0,subtree:!0}),new MutationObserver(c).observe(k,{attributes:!0,childList:!0,subtree:!0});var A,T=Q;function c(e){for(var t=0;t<e.length;t++)mutation=e[t];var a=Q.querySelector(".embeddedServiceSidebar.modalContainer");k&&a&&!k.contains(a)&&(k.appendChild(a),T=k,A=0,w.append(I("chat-mover-container","mousedown",E)),w.append(I("chat-expander-container","click",F)),w.append(I("chat-controls-seperator")));var n=T.querySelector(".shortHeaderContent");n&&w.childNodes.length&&n.insertBefore(w,n.lastChild);var i=T.querySelectorAll(".chatOptions .chatOption.embeddedServiceLiveAgentStateChatHeaderOption");if(i&&i.length)for(var o=document.createDocumentFragment(),r=0;r<i.length;r++){var s=i[r],c=s.classList.contains("keep-me");0===r&&s&&!c?(x(_=s),o.append(s)):c||s.classList.add("keep-me")}var l=T.querySelector(".messageArea");if(l){initialLetters="",B.initials.length?(initialLetters=B.initials.join(""),localStorage.setItem("initials",initialLetters)):initialLetters=localStorage.getItem("initials"),!q&&initialLetters&&((q=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(q),(q=q.sheet).insertRule('.embeddedServiceLiveAgentStateChatItem.chasitor .chatContent.chatContent:after {content:"'+initialLetters+'"}'));var d=l.querySelectorAll("li");if(d.length>A){var u="";if(d.length-A==1){var p=new Date,m=(p.getDay(),p.getHours()),g=(p.getMinutes()<10?"0":"")+p.getMinutes(),v=12<=m?"PM":"AM";"00"==(m=12<m?m-12:m)&&(m=12),u="Today "+m+":"+g+" "+v,localStorage.setItem("timeStamp",u)}else u=localStorage.getItem("timeStamp");var h=l.lastChild;h&&u&&(h.textContent=u),A=d.length}}var y=T.querySelector(".dialogState");if(y&&!y.classList.contains("updated")){var f=T.querySelector(".dialogTopButton span"),b=T.querySelector(".dialogBottomButton span"),C=T.querySelector("#dialogTextBody .uiOutputRichText");switch(f.textContent){case"End Chat":f.textContent="End",b.textContent="Cancel",C.textContent="Before ending your chat session would you like to download a transcript?";var S=T.querySelector(".dialogTextContainer");S&&S.append(_);break;case"Leave":b.textContent="Cancel",C.innerHtml="Weâ€™re sorry for the wait. If you leave the queue, you will lose your place in line to chat. <br><br> Help is also available at <a>https://support.ca.com</a>";break;case"Start a New Chat":f.textContent="Try Again",b.textContent="Leave"}y.classList.add("updated")}L&&L()}function x(e){!function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}(e);var t=I("end-confirmation-download-button"),a=I("end-confirmation-download-button-text");a.textContent="Download transcript",t.append(a),e.append(t)}function I(e,t,a){var n=document.createElement("div");return n.classList.add(e),a&&n.addEventListener(t,a,{passive:!0}),n}function l(e,t){var a;return t?a=new CustomEvent(e,t):(a=document.createEvent("Event")).initEvent(e,!0,!0),a}function E(e){console.log("drag started"),n&&n.dispatchEvent(l("chatWindow.gripperClicked")),event.currentTarget.addEventListener("mouseup",function(){n&&n.dispatchEvent(l("chatWindow.gripperReleased")),console.log("drag ended")},{once:!0})}function F(e){var t=document.querySelector(".dockableContainer");if(t){var a=t.classList.toggle("large-window");n&&n.dispatchEvent(l("chatWindow.sizeChanged",{newState:a?"large":"small"})),console.log("toggling expanded",a),e.stopImmediatePropagation()}}},initials:[]};return B}();
//# sourceMappingURL=caSalesforceSnapIn.min.js.map
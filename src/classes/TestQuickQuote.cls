@isTest
private class TestQuickQuote {

    static void loadTestDataForQuickQuote()
    {
        List<User> ps = [select id from user where  Profile.Id = '00e30000000oou3' and isActive=true LIMIT 1];
        DDR_Rules__c ddrRule;
        List<DDR_Rules__c> ddrQuery = [SELECT Id FROM DDR_Rules__c LIMIT 1];
        if(!ddrQuery.isEmpty())
            ddrRule = new DDR_Rules__c(Id = ddrQuery[0].Id , new_product_cpq_quote_type_rule__c = true , new_product_acsr_lt_exceptions__c = 'Subscription;Duration Based Subscription' , renewal2_business_transaction_type_rule__c = true , new_product_payment_schedule__c = 'Custom' , new_product_emea_quote_total_rule__c = true , renewal3_business_transaction_type_rule__c = true , new_product_quick_quote_line_item_rule__c = true , new_product_auth_use_model_rule__c = true , renewal2_max_quote_total_annum_for_la__c = 100000.00 , new_product_ps_and_lt_rule__c = true , renewal3_net_payment_term_rule__c = true , renewal2_la_quote_total_annum_rule__c = true , new_product_ps_for_ps_and_lt_2__c = 'Quarterly' , renewal2_net_payment_term_rule__c = true , renewal2_na_quote_total_annum_rule__c = true , renewal3_using_quick_contract_rule__c = true , new_product_lt_for_ps_and_lt__c = 'Perpetual' , renewal_using_quick_contract_rule__c = true , renewal_net_payment_terms__c = 'Greater than Net 45' , new_product_account_segment_rule__c = true , new_product_net_payment_terms__c = 'Greater than Net 45' , new_product_acsr_btt_exceptions__c = 'Education;Services' , new_product_account_segment__c = 'Existing Enterprise' , renewal_la_quote_total_annum_rule__c = true , ownerid = ps[0].Id , new_product_pricing_group_term_rule__c = true , new_product_using_quick_contract_rule__c = true , renewal_term_rule__c = true , new_product_net_payment_term_rule__c = true , new_product_pricing_group_term__c = 12 , renewal2_maximum_contract_term__c = 3 , new_product_pricing_group__c = 'SaaS' , currencyisocode = 'USD' , new_product_max_quote_total_for_la__c = 50000.00 , renewal3_business_transaction_type__c = 'Mainframe Capacity' , renewal2_emea_quote_total_annum_rule__c = true , new_product_auto_calc_state_renewal_rule__c = true , renewal2_using_quick_contract_rule__c = true , new_product_maximum_contract_term__c = 5 , renewal_max_quote_total_annum_for_la__c = 100000.00 , new_product_cpq_quote_type__c = 'FM;Tier 1;Tier 2;Usage;eCommerce' , renewal_na_quote_total_annum_rule__c = true , new_product_max_quote_total_for_na__c = 250000.00 , renewal_emea_quote_total_annum_rule__c = true , renewal_business_transaction_type__c = 'Mainframe Capacity' , new_product_max_quote_total_for_emea__c = 150000.00 , renewal2_term_rule__c = true , renewal_max_quote_total_annum_for_na__c = 300000.00 , renewal2_net_payment_terms__c = 'Greater than Net 45' , new_product_auth_use_model__c = 'Special Metric' , new_product_term_rule__c = true , new_product_na_quote_total_rule__c = true , new_product_ps_and_lt_2_rule__c = true , renewal_max_quote_total_annum_for_emea__c = 300000.00 , renewal3_net_payment_terms__c = 'Greater than Net 45' , renewal2_max_quote_total_annum_for_na__c = 300000.00 , renewal_net_payment_term_rule__c = true , renewal2_max_quote_total_annum_for_emea__c = 300000.00 , new_product_lt_for_ps_and_lt_2__c = 'Perpetual' , renewal_maximum_contract_term__c = 3 , new_product_la_quote_total_rule__c = true , renewal2_business_transaction_type__c = 'Mainframe Capacity' , new_product_payment_schedule_rule__c = true , renewal_business_transaction_type_rule__c = true , new_product_ps_for_ps_and_lt__c = 'Monthly', New_Product_BTT_for_PS_and_LT__c='New Product;Distributed Capacity', New_Product_BTT_for_PS_and_LT_2__c='New Product;Distributed Capacity', New_Product_LT_Combo_Rule_1__c=true, New_Product_LT1_for_LT_Combo_1__c='Duration Based Subscription', New_Product_LT2_for_LT_Combo_1__c='Perpetual', New_Product_BTT_for_LT_Combo_1__c='New Product;Distributed Capacity', New_Product_LT_Combo_Rule_2__c=true, New_Product_LT1_for_LT_Combo_2__c='Duration Based Subscription', New_Product_LT2_for_LT_Combo_2__c='UMF', New_Product_BTT_for_LT_Combo_2__c='New Product', New_Product_LT_Combo_Rule_3__c=true, New_Product_LT1_for_LT_Combo_3__c='Duration Based Subscription', New_Product_LT2_for_LT_Combo_3__c='Subscription', New_Product_BTT_for_LT_Combo_3__c='New Product;Distributed Capacity');
        else
            ddrRule = new DDR_Rules__c(new_product_cpq_quote_type_rule__c = true , new_product_acsr_lt_exceptions__c = 'Subscription;Duration Based Subscription' , renewal2_business_transaction_type_rule__c = true , new_product_payment_schedule__c = 'Custom' , new_product_emea_quote_total_rule__c = true , renewal3_business_transaction_type_rule__c = true , new_product_quick_quote_line_item_rule__c = true , new_product_auth_use_model_rule__c = true , renewal2_max_quote_total_annum_for_la__c = 100000.00 , new_product_ps_and_lt_rule__c = true , renewal3_net_payment_term_rule__c = true , renewal2_la_quote_total_annum_rule__c = true , new_product_ps_for_ps_and_lt_2__c = 'Quarterly' , renewal2_net_payment_term_rule__c = true , renewal2_na_quote_total_annum_rule__c = true , renewal3_using_quick_contract_rule__c = true , new_product_lt_for_ps_and_lt__c = 'Perpetual' , renewal_using_quick_contract_rule__c = true , renewal_net_payment_terms__c = 'Greater than Net 45' , new_product_account_segment_rule__c = true , new_product_net_payment_terms__c = 'Greater than Net 45' , new_product_acsr_btt_exceptions__c = 'Education;Services' , new_product_account_segment__c = 'Existing Enterprise' , renewal_la_quote_total_annum_rule__c = true , ownerid = ps[0].Id , new_product_pricing_group_term_rule__c = true , new_product_using_quick_contract_rule__c = true , renewal_term_rule__c = true , new_product_net_payment_term_rule__c = true , new_product_pricing_group_term__c = 12 , renewal2_maximum_contract_term__c = 3 , new_product_pricing_group__c = 'SaaS' , currencyisocode = 'USD' , new_product_max_quote_total_for_la__c = 50000.00 , renewal3_business_transaction_type__c = 'Mainframe Capacity' , renewal2_emea_quote_total_annum_rule__c = true , new_product_auto_calc_state_renewal_rule__c = true , renewal2_using_quick_contract_rule__c = true , new_product_maximum_contract_term__c = 5 , renewal_max_quote_total_annum_for_la__c = 100000.00 , new_product_cpq_quote_type__c = 'FM;Tier 1;Tier 2;Usage;eCommerce' , renewal_na_quote_total_annum_rule__c = true , new_product_max_quote_total_for_na__c = 250000.00 , renewal_emea_quote_total_annum_rule__c = true , renewal_business_transaction_type__c = 'Mainframe Capacity' , new_product_max_quote_total_for_emea__c = 150000.00 , renewal2_term_rule__c = true , renewal_max_quote_total_annum_for_na__c = 300000.00 , renewal2_net_payment_terms__c = 'Greater than Net 45' , new_product_auth_use_model__c = 'Special Metric' , new_product_term_rule__c = true , new_product_na_quote_total_rule__c = true , new_product_ps_and_lt_2_rule__c = true , renewal_max_quote_total_annum_for_emea__c = 300000.00 , renewal3_net_payment_terms__c = 'Greater than Net 45' , renewal2_max_quote_total_annum_for_na__c = 300000.00 , renewal_net_payment_term_rule__c = true , renewal2_max_quote_total_annum_for_emea__c = 300000.00 , new_product_lt_for_ps_and_lt_2__c = 'Perpetual' , renewal_maximum_contract_term__c = 3 , new_product_la_quote_total_rule__c = true , renewal2_business_transaction_type__c = 'Mainframe Capacity' , new_product_payment_schedule_rule__c = true , renewal_business_transaction_type_rule__c = true , new_product_ps_for_ps_and_lt__c = 'Monthly', New_Product_BTT_for_PS_and_LT__c='New Product;Distributed Capacity', New_Product_BTT_for_PS_and_LT_2__c='New Product;Distributed Capacity', New_Product_LT_Combo_Rule_1__c=true, New_Product_LT1_for_LT_Combo_1__c='Duration Based Subscription', New_Product_LT2_for_LT_Combo_1__c='Perpetual', New_Product_BTT_for_LT_Combo_1__c='New Product;Distributed Capacity', New_Product_LT_Combo_Rule_2__c=true, New_Product_LT1_for_LT_Combo_2__c='Duration Based Subscription', New_Product_LT2_for_LT_Combo_2__c='UMF', New_Product_BTT_for_LT_Combo_2__c='New Product', New_Product_LT_Combo_Rule_3__c=true, New_Product_LT1_for_LT_Combo_3__c='Duration Based Subscription', New_Product_LT2_for_LT_Combo_3__c='Subscription', New_Product_BTT_for_LT_Combo_3__c='New Product;Distributed Capacity');
        
        upsert ddrRule;
    }

    
    static testmethod void testAutoApprove()
    {
        ddrRuleRecordTestClass.insertDdrRule();
        testOpportunityTriggersClass.createNewOppWithNoTriggers();
        
        opportunity opp = [Select Id from Opportunity LIMIT 1];
        
        
        List<scpq__SciQuote__c> sterlingQuoteList = new List<scpq__SciQuote__c>();
        scpq__SciQuote__c sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' , Agile_Central_Clauses__c='ELA',ca_adjusted_eligible_ncv__c = 419231.630000 , 
            ca_services_total__c = 100.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-13' , 
            ca_total_volume_gsa_maintenance_price__c = 110406.38 , ca_effective_date__c = Date.valueOf('2013-03-13 00:00:00') , 
            ca_total_proposed_maint_fee__c = 157174.36 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , 
            ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 52391.45 , scpq__opportunityid__c = opp.id , 
            ca_contract_end_date__c = Date.valueOf('2016-03-12 00:00:00') , ca_total_list_license_subs_fee__c = 262057.27 , commit_payment__c = 0.00 , 
            ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 419131.63 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = -42.41 , 
            ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , 
            ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , 
            ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100006711' , 
            last_updated_from_sfdc__c = false , ca_cpq_quote_total__c = 419231.63 , ca_adjusted_attrf_for_the_term__c = 0.000000 , 
            maintenance_payment__c = 157174.36 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-13 00:00:00') ,
            scpq__orderheaderkey__c = '2013031313100917506307t' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' ,
             contract_end_date_text__c = '2016-03-12' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , 
             subscription_payment__c = 0.00 , ca_new_trr__c = 139710.540000 , ca_revenue_per_day_old__c = 0.000000 , 
             ca_total_total_disc_off_vol_gsa_price__c = -42.39 , ca_total_proposed_lic_sub_fee__c = 262057.27 , license_payment__c = 261957.27 , 
             name = 'Belden_Test Opp haysa01' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 157174.36 , ca_eaid__c = 'ER49475' , 
             ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , 
             ca_total_volume_gsa_license_subs_fee__c = 184010.64 , ca_total_disc_off_vol_gsa_maint_price__c = -42.36 , 
             ca_adjusted_time_commissionable_value__c = 0.00);
        
        sterlingQuoteList.add(sq);
        insert sterlingQuoteList;
        
        test.startTest();
        sq.CA_CPQ_Quote_Status__c = 'Approved';
        update sq;
        
        sq.CA_CPQ_Quote_Status__c = 'Draft';
        update sq;
        
        sq.CA_CPQ_Quote_Status__c = 'Request Approval';
        update sq;
        test.stopTest();
        
       
    }
    
    
    
    static testmethod void testRenewalRulesDDR()
    {
         ddrRuleRecordTestClass.insertDdrRule();
        testOpportunityTriggersClass.createNewOppWithNoTriggers();
        
        opportunity opp = [Select Id from Opportunity LIMIT 1];
        
        List<scpq__SciQuote__c> sterlingQuoteList = new List<scpq__SciQuote__c>();
        
        
        // *** Medium Touch ****
        // QQ flag 
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = false , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '20130316213532175518640' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch'));
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = false , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t1' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , CA_Commissionable_Area__c = 'Medium Touch Agile Central'));
        
        
        // quote total per anum
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 1000000.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t2' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch'));
        
        // Term
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2017-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t3' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch' , net_payment_terms__c = 'Greater than Net 45'));
        
        // Net Payment Terms
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t4' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch' , net_payment_terms__c = 'Greater than Net 45'));
        
        
        // *** Medium Touch Nimsoft ***
        // QQ flag 
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = false , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t5' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch Nimsoft SaaS'));//YEDRA01 for AR:2994
        
        // quote total per anum
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 1000000.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t6' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch Nimsoft SaaS'));//YEDRA01 for AR:2994
        
        // Term
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2017-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t7' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch Nimsoft SaaS'));//YEDRA01 for AR:2994
        
        // Net Payment Terms
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t8' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch Nimsoft SaaS' , net_payment_terms__c = 'Greater than Net 45'));//YEDRA01 for AR:2994
        
        
        // *** High Touch Fast Track ***
        // QQ flag 
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = false , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t9' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'High Touch Fast Track'));
        
        // Net Payment Terms 
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t0' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'High Touch Fast Track' , net_payment_terms__c = 'Greater than Net 45'));
        
        
        // *** High Touch ***
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551865t' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'High Touch'));
        
        insert sterlingQuoteList;
        
        //for(scpq__SciQuote__c sq : sterlingQuoteList)
            //sterlingQuoteList[0].CA_CPQ_Quote_Status__c = 'Draft';
       // update sterlingQuoteList;
        
        //for(scpq__SciQuote__c sq : sterlingQuoteList)
             sterlingQuoteList[0].CA_CPQ_Quote_Status__c = 'Request Approval';
        update sterlingQuoteList;
        
        List<scpq__SciQuote__c> squotes = [SELECT Id, Oubound_Status__c
                                           FROM scpq__SciQuote__c 
                                           WHERE Id IN :sterlingQuoteList LIMIT 1];
        
        //for(scpq__SciQuote__c squote : squotes)
           // System.assertEquals('Deal Desk', squote.Oubound_Status__c);
    }

    
    static testMethod void testNonDDRQuotes() 
    {

         ddrRuleRecordTestClass.insertDdrRule();
        testOpportunityTriggersClass.createNewOppWithNoTriggers();
        
        opportunity opp = [Select Id from Opportunity LIMIT 1];
        
        List<scpq__SciQuote__c> sterlingQuoteList = new List<scpq__SciQuote__c>();
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629e' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00,ca_commissionable_area__c='Medium Touch Agile Centeral'));
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Credit Payment' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 45659.73 , has_pending_approvers__c = true , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006830' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 45659.73 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621453517552198t' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_cpq_quote_status__c = 'Pending Pricing Approval' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'ELA' , subscription_payment__c = 0.00 , ca_new_trr__c = 15219.910000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'DEBENHAMS _EMEA Test Opp haysa01' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 45659.73 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 45659.73 , ca_commissionable_area__c = 'Acquisition'));
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false  , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551862t' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'Medium Touch Nimsoft SaaS'));//YEDRA01 for AR:2994
        SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551863t' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'High Touch Fast Track'));
        //SterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_direct_indirect__c = 'Direct' , effective_date_text__c = '2013-03-16' , ca_non_standard_discount__c = 'Competitor Replacement' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-16 00:00:00') , ca_total_proposed_maint_fee__c = 11414.93 , has_pending_approvers__c = false , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'DEBENHAMS PLC' , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-15 00:00:00') , ca_total_list_license_subs_fee__c = 19024.89 , commit_payment__c = 0.00 , ca_sales_area__c = 'UKI' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_brief_deal_desc__c = 'TEST' , ca_cpq_quote_number__c = 'Y100006828' , last_updated_from_sfdc__c = true , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 11414.93 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-16 00:00:00') , scpq__orderheaderkey__c = '2013031621353217551864t' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'GBP' , contract_end_date_text__c = '2016-03-15' , ca_ddr_name__c = 'DD - 41723' , ca_cpq_quote_status__c = 'Deal Desk' , ca_referral_fee_amount__c = 0.00 , ca_non_standard_contract__c = 'None' , subscription_payment__c = 0.00 , ca_new_trr__c = 10146.610000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 19024.89 , license_payment__c = 19024.89 , name = 'DEBENHAMS _DD17' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 11414.93 , ca_eaid__c = 'ER49475' , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00 , ca_commissionable_area__c = 'High Touch'));
        insert sterlingQuoteList;
        
        test.startTest();
        for(scpq__SciQuote__c sq : sterlingQuoteList)
            sq.CA_CPQ_Quote_Status__c = 'Draft';
        update sterlingQuoteList;
        
        for(scpq__SciQuote__c sq : sterlingQuoteList)
            sq.CA_CPQ_Quote_Status__c = 'Request Approval';
        update sterlingQuoteList;
        test.stopTest();
        
        
        //    System.assertNotEquals('Deal Desk', squote.Oubound_Status__c);
    }

    
    static testMethod void testDDRNewProductRules() 
    {
         ddrRuleRecordTestClass.insertDdrRule();
        testOpportunityTriggersClass.createNewOppWithNoTriggers();
        
        opportunity opp = [Select Id from Opportunity LIMIT 1];
        
        List<scpq__SciQuote__c> sterlingQuoteList = new List<scpq__SciQuote__c>();
        //List<scpq__SciQuote__c> sterlingQuoteLineItemList = new List<scpq__SciQuote__c>();
        Map<Quote_Product_Report__c, scpq__SciQuote__c> lineItemToQuote = new Map<Quote_Product_Report__c, scpq__SciQuote__c>();
        
        scpq__SciQuote__c sq;
        Quote_Product_Report__c qpr;
        
        // qq flag triggers ddr and creates new ddr
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N',CA_Commissionable_Area__c='Medium Touch Agile Centeral' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'FM' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = false , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659624' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00));
        
        // qq acc seg triggers new ddr
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'FM' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659624x' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00));
        
        // cpq quote type triggers ddr
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'FM' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659625' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00));
        
        // cpq quote total triggers ddr
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 500000.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659626' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00));
        
        // Pricing Group and Term will trigger ddr
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' , ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2013-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659627l' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 1', CA_Pricing_Group__c = 'SaaS', Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        // term will trigger ddr
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2020-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659627' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00));
        
        // net payment terms will trigger ddr
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Greater than Net 45' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659628' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00));
        
        // Payment Schedule will trigger ddr
        sterlingQuoteList.add(new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00, CA_Payment_Schedule__c = 'Custom'));
        
        // Payment Schedule and license type will trigger ddr
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629a' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00, CA_Payment_Schedule__c = 'Monthly');
        qpr = new Quote_Product_Report__c(Name='test line item 2', License_Type__c = 'Perpetual', Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        // Payment Schedule (with other value) and license type will trigger ddr
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629b' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00, CA_Payment_Schedule__c = 'Quarterly');
        qpr = new Quote_Product_Report__c(Name='test line item 3', License_Type__c = 'Perpetual', Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        // qq on material will trigger ddr
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629c' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 4', Quick_Quote__c = false, Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629d' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 4', Quick_Quote__c = false, Bus_Transaction_Type__c = 'New Product',License_Type__c = 'Subscription');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629e' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 4', Quick_Quote__c = false, Bus_Transaction_Type__c = 'New Product',License_Type__c = 'UMF');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629f' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 4', Quick_Quote__c = false, Bus_Transaction_Type__c = 'New Product',License_Type__c = 'Duration Based Subscription');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        // AutoCalc Stated Renewal flag and license type will trigger ddr
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629g' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 5', Quick_Quote__c = true, AutoCalc_Stated_Renewal__c = 'No', License_Type__c = 'Perpetual', Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629h' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 5', Quick_Quote__c = true, AutoCalc_Stated_Renewal__c = 'No', License_Type__c = 'Perpetual', Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='High Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629i' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'Renewal' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 5', Quick_Quote__c = true, AutoCalc_Stated_Renewal__c = 'No', License_Type__c = 'Subscription', Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        // Auth Use Model will trigger ddr
        sq = new scpq__SciQuote__c(ca_multi_site__c = 'N' ,CA_Commissionable_Area__c='Medium Touch', ca_adjusted_eligible_ncv__c = 0.000000 , ca_services_total__c = 0.00 , ca_service_provider_id__c = 'PN69595' , ca_direct_indirect__c = 'MSP' , net_payment_terms__c = 'Net 30' , ca_total_volume_gsa_maintenance_price__c = 0.00 , ca_effective_date__c = Date.valueOf('2013-03-22 00:00:00') , implied_interest_rate__c = 0.000000 , ca_total_proposed_maint_fee__c = 0.00 , has_pending_approvers__c = false , oubound_status__c = 'Draft' , ca_gsa_pricing_flag__c = false , ca_eaid_name__c = 'Beldin Inc.' , ca_gsa_discount_per_license__c = 0.00 , ca_expected_booking_month__c = Date.valueOf('2013-03-12 00:00:00') , ca_total_stated_renewal_fee__c = 0.00 , scpq__opportunityid__c = opp.Id , ca_contract_end_date__c = Date.valueOf('2016-03-21 00:00:00') , ca_total_list_license_subs_fee__c = 0.00 , commit_payment__c = 0.00 , ca_sales_area__c = 'West' , ca_total_attrf__c = 0.000000 , ca_cpq_product_total__c = 0.00 , ca_total_disc_off_vol_gsa_lic_sub_fee__c = 0.00 , ca_total_lic_sub_off_list__c = 0.00 , ca_total_old_trr__c = 0.000000 , ca_realization_rate__c = 0.000000 , ca_total_maint_off_list__c = 0.00 , ca_npv__c = 0.00 , ca_contracted_renewal__c = 'Yes' , ca_revenue_per_day_percentage__c = 0.00 , ca_trr_percent__c = 0.000000 , auto_approved__c = false , ca_using_quick_contract__c = true , ca_proposed_annual_time__c = 0.000000 , created_user_email__c = 'haysa01@ca.com.dmna1' , ca_cpq_quote_number__c = 'Y100007066' , last_updated_from_sfdc__c = true , ca_service_provider_name__c = 'RACKSPACE' , ca_cpq_quote_total__c = 0.00 , ca_adjusted_attrf_for_the_term__c = 0.000000 , maintenance_payment__c = 0.00 , scpq__scilastmodifieddate__c = DateTime.valueOf('2013-03-25 00:00:00') , scpq__orderheaderkey__c = '2013032204551417659629j' , ca_revenue_per_day_new__c = 0.000000 , currencyisocode = 'USD' , ca_ddr_name__c = 'DD - 42165' , ca_cpq_quote_status__c = 'Draft' , ca_referral_fee_amount__c = 0.00 , subscription_payment__c = 0.00 , ca_new_trr__c = 0.000000 , ca_revenue_per_day_old__c = 0.000000 , ca_total_total_disc_off_vol_gsa_price__c = 0.00 , ca_total_proposed_lic_sub_fee__c = 0.00 , license_payment__c = 0.00 , name = 'Type_Test' , scpq__primary__c = false , ca_total_list_maintenance_price__c = 0.00 , ca_eaid__c = 'G004060' , ca_total_total_disc_off_list__c = 0 , ca_quote_type__c = 'New Product' , ca_annual_srvs_edu_in_transaction__c = 0.000000 , ca_primary_flag__c = false , ca_total_volume_gsa_license_subs_fee__c = 0.00 , ca_gsa_total_discount_per_price__c = 0.00 , ca_gsa_discount_per_maintenance__c = 0.00 , ca_total_disc_off_vol_gsa_maint_price__c = 0.00 , ca_adjusted_time_commissionable_value__c = 0.00);
        qpr = new Quote_Product_Report__c(Name='test line item 6', Quick_Quote__c = true, AutoCalc_Stated_Renewal__c = 'Yes', Auth_Use_Model__c = 'Special Metric', Bus_Transaction_Type__c = 'New Product');
        sterlingQuoteList.add(sq);
        lineItemToQuote.put(qpr, sq);
        
        Test.startTest();
        insert sterlingQuoteList;
        for(Quote_Product_Report__c lineItem : lineItemToQuote.keySet())
        {
            scpq__SciQuote__c quoteWithLineItem = lineItemToQuote.get(lineItem);
            lineItem.Sterling_Quote__c = quoteWithLineItem.id;
        }
        
        insert new List<Quote_Product_Report__c>(lineItemToQuote.keySet());
        
        //for(scpq__SciQuote__c sterlingQuote : sterlingQuoteList)
        //{
            sterlingQuoteList[0].CA_CPQ_Quote_Status__c = 'Request Approval';
        //}
        update sterlingQuoteList;
        Test.stopTest();
        
      
    }
    
    
    
    
    
    static testMethod void test_ddrAdminPanel() 
    {
        ApexPages.StandardController sc = new ApexPages.StandardController(new DDR_Rules__c(New_Product_ACSR_LT_Exceptions__c='Subscription;Duration Based Subscription', New_Product_CPQ_Quote_Type__c='FM', New_Product_BTT_for_PS_and_LT__c='New Product;Distributed Capacity', New_Product_BTT_for_PS_and_LT_2__c='New Product;Distributed Capacity', New_Product_LT_Combo_Rule_1__c=false, New_Product_LT_Combo_Rule_2__c=false, New_Product_LT_Combo_Rule_3__c=false,New_Product_LT_Combo_Rule_4__c=true,New_Product_LT2_for_LT_Combo_4__c='Perpetual',New_Product_LT1_for_LT_Combo_4__c='Subscription',New_Product_BTT_for_LT_Combo_4__c='New Product'));
        ddrAdminPanelControllerExt ec = new ddrAdminPanelControllerExt(sc);

        ec.checkForRecord();
        sc.save();
        ec.checkForRecord();

    }
}